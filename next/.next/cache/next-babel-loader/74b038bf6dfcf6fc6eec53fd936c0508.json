{"ast":null,"code":"var _jsxFileName = \"/Users/olivier.ramier/work/src/apollo/frontend/next/src/components/layout/Header.tsx\";\nvar __jsx = React.createElement;\nimport { useApolloClient } from '@apollo/react-hooks';\nimport { IconButton, Menu, MenuItem } from '@material-ui/core';\nimport AppBar from '@material-ui/core/AppBar';\nimport Button from '@material-ui/core/Button';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport AccountCircle from '@material-ui/icons/AccountCircle';\nimport Cookies from 'js-cookie';\nimport React, { useState } from 'react';\nimport Link from 'next/link';\nimport { CurrentUserQuery } from '../../graphql/generated/queries';\nimport { useCurrentUser } from '../../hooks/users.hooks';\nconst useStyles = makeStyles(theme => ({\n  root: {// flexGrow: 1,\n  },\n  grow: {\n    flexGrow: 1\n  },\n  menuButton: {\n    marginRight: theme.spacing(2)\n  },\n  title: {\n    flexGrow: 1,\n    textAlign: 'left',\n    color: 'inherit',\n    textDecoration: 'none'\n  },\n  buttonLink: {\n    color: 'inherit',\n    textDecoration: 'none'\n  }\n}));\nexport const Header = () => {\n  const classes = useStyles({});\n  const {\n    currentUser,\n    loading\n  } = useCurrentUser();\n  const {\n    0: anchorEl,\n    1: setAnchorEl\n  } = useState(null);\n  const isMenuOpen = Boolean(anchorEl);\n\n  const handleProfileMenuOpen = event => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleMenuClose = () => {\n    setAnchorEl(null);\n  };\n\n  const client = useApolloClient();\n\n  const logout = () => {\n    Cookies.remove('jwt_token');\n    client.writeData({\n      data: {\n        isLoggedIn: false\n      }\n    });\n    client.writeQuery({\n      query: CurrentUserQuery,\n      data: {\n        currentUser: null\n      }\n    });\n    handleMenuClose();\n  };\n\n  const menuId = 'primary-search-account-menu'; // const history = useHistory();\n\n  return __jsx(\"div\", {\n    className: classes.root,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67\n    },\n    __self: this\n  }, __jsx(AppBar, {\n    position: \"static\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68\n    },\n    __self: this\n  }, __jsx(Toolbar, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69\n    },\n    __self: this\n  }, __jsx(Typography, {\n    variant: \"h6\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70\n    },\n    __self: this\n  }, __jsx(Link, {\n    href: \"/\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71\n    },\n    __self: this\n  }, __jsx(\"a\", {\n    className: classes.title,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72\n    },\n    __self: this\n  }, \"Apollo Project \", !!currentUser && currentUser.email))), __jsx(\"div\", {\n    className: classes.grow,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75\n    },\n    __self: this\n  }), __jsx(Link, {\n    href: \"/about\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76\n    },\n    __self: this\n  }, __jsx(Button, {\n    className: classes.buttonLink,\n    color: \"inherit\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77\n    },\n    __self: this\n  }, \"About\")), !currentUser && !loading && __jsx(React.Fragment, null, __jsx(Link, {\n    href: \"/register\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83\n    },\n    __self: this\n  }, __jsx(Button, {\n    color: \"inherit\",\n    className: classes.buttonLink,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84\n    },\n    __self: this\n  }, \"Register\")), __jsx(Link, {\n    href: \"/login\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88\n    },\n    __self: this\n  }, __jsx(Button, {\n    color: \"inherit\",\n    className: classes.buttonLink,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89\n    },\n    __self: this\n  }, \"Login\"))), !!currentUser && __jsx(React.Fragment, null, __jsx(IconButton // edge=\"end\"\n  // aria-label=\"account of current user\"\n  // aria-controls=\"primary-search-account-menu\"\n  // aria-haspopup=\"true\"\n  // color=\"inherit\"\n  , {\n    onClick: handleProfileMenuOpen,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97\n    },\n    __self: this\n  }, __jsx(AccountCircle, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105\n    },\n    __self: this\n  })), __jsx(Menu, {\n    anchorEl: anchorEl // anchorOrigin={{ vertical: 'top', horizontal: 'right' }}\n    ,\n    id: menuId,\n    keepMounted: true // transformOrigin={{ vertical: 'top', horizontal: 'right' }}\n    ,\n    open: isMenuOpen,\n    onClose: handleMenuClose,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108\n    },\n    __self: this\n  }, __jsx(MenuItem, {\n    onClick: () => {// history.push(`/profile/${currentUser.key}`);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117\n    },\n    __self: this\n  }, \"Profile\"), __jsx(MenuItem, {\n    onClick: logout,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124\n    },\n    __self: this\n  }, \"Logout\"))))));\n};","map":{"version":3,"sources":["/Users/olivier.ramier/work/src/apollo/frontend/next/src/components/layout/Header.tsx"],"names":["useApolloClient","IconButton","Menu","MenuItem","AppBar","Button","makeStyles","Toolbar","Typography","AccountCircle","Cookies","React","useState","Link","CurrentUserQuery","useCurrentUser","useStyles","theme","root","grow","flexGrow","menuButton","marginRight","spacing","title","textAlign","color","textDecoration","buttonLink","Header","classes","currentUser","loading","anchorEl","setAnchorEl","isMenuOpen","Boolean","handleProfileMenuOpen","event","currentTarget","handleMenuClose","client","logout","remove","writeData","data","isLoggedIn","writeQuery","query","menuId","email"],"mappings":";;AAAA,SAASA,eAAT,QAAgC,qBAAhC;AACA,SAASC,UAAT,EAAqBC,IAArB,EAA2BC,QAA3B,QAA2C,mBAA3C;AACA,OAAOC,MAAP,MAAmB,0BAAnB;AACA,OAAOC,MAAP,MAAmB,0BAAnB;AACA,SAASC,UAAT,QAA2B,0BAA3B;AACA,OAAOC,OAAP,MAAoB,2BAApB;AACA,OAAOC,UAAP,MAAuB,8BAAvB;AACA,OAAOC,aAAP,MAA0B,kCAA1B;AACA,OAAOC,OAAP,MAAoB,WAApB;AACA,OAAOC,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,OAAOC,IAAP,MAAiB,WAAjB;AAEA,SAASC,gBAAT,QAAiC,iCAAjC;AACA,SAASC,cAAT,QAA+B,yBAA/B;AAEA,MAAMC,SAAS,GAAGV,UAAU,CAACW,KAAK,KAAK;AACrCC,EAAAA,IAAI,EAAE,CACJ;AADI,GAD+B;AAIrCC,EAAAA,IAAI,EAAE;AACJC,IAAAA,QAAQ,EAAE;AADN,GAJ+B;AAOrCC,EAAAA,UAAU,EAAE;AACVC,IAAAA,WAAW,EAAEL,KAAK,CAACM,OAAN,CAAc,CAAd;AADH,GAPyB;AAUrCC,EAAAA,KAAK,EAAE;AACLJ,IAAAA,QAAQ,EAAE,CADL;AAELK,IAAAA,SAAS,EAAE,MAFN;AAGLC,IAAAA,KAAK,EAAE,SAHF;AAILC,IAAAA,cAAc,EAAE;AAJX,GAV8B;AAgBrCC,EAAAA,UAAU,EAAE;AACVF,IAAAA,KAAK,EAAE,SADG;AAEVC,IAAAA,cAAc,EAAE;AAFN;AAhByB,CAAL,CAAN,CAA5B;AAsBA,OAAO,MAAME,MAAoB,GAAG,MAAM;AACxC,QAAMC,OAAO,GAAGd,SAAS,CAAC,EAAD,CAAzB;AACA,QAAM;AAAEe,IAAAA,WAAF;AAAeC,IAAAA;AAAf,MAA2BjB,cAAc,EAA/C;AACA,QAAM;AAAA,OAACkB,QAAD;AAAA,OAAWC;AAAX,MAA0BtB,QAAQ,CAAC,IAAD,CAAxC;AACA,QAAMuB,UAAU,GAAGC,OAAO,CAACH,QAAD,CAA1B;;AAEA,QAAMI,qBAAqB,GAAIC,KAAD,IAAgB;AAC5CJ,IAAAA,WAAW,CAACI,KAAK,CAACC,aAAP,CAAX;AACD,GAFD;;AAIA,QAAMC,eAAe,GAAG,MAAM;AAC5BN,IAAAA,WAAW,CAAC,IAAD,CAAX;AACD,GAFD;;AAGA,QAAMO,MAAM,GAAGzC,eAAe,EAA9B;;AAEA,QAAM0C,MAAM,GAAG,MAAM;AACnBhC,IAAAA,OAAO,CAACiC,MAAR,CAAe,WAAf;AACAF,IAAAA,MAAM,CAACG,SAAP,CAAiB;AAAEC,MAAAA,IAAI,EAAE;AAAEC,QAAAA,UAAU,EAAE;AAAd;AAAR,KAAjB;AACAL,IAAAA,MAAM,CAACM,UAAP,CAAkB;AAChBC,MAAAA,KAAK,EAAElC,gBADS;AAEhB+B,MAAAA,IAAI,EAAE;AAAEd,QAAAA,WAAW,EAAE;AAAf;AAFU,KAAlB;AAIAS,IAAAA,eAAe;AAChB,GARD;;AAUA,QAAMS,MAAM,GAAG,6BAAf,CAzBwC,CA0BxC;;AAEA,SACE;AAAK,IAAA,SAAS,EAAEnB,OAAO,CAACZ,IAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,MAAD;AAAQ,IAAA,QAAQ,EAAC,QAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,UAAD;AAAY,IAAA,OAAO,EAAC,IAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,IAAD;AAAM,IAAA,IAAI,EAAC,GAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAG,IAAA,SAAS,EAAEY,OAAO,CAACN,KAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAA6C,CAAC,CAACO,WAAF,IAAiBA,WAAW,CAACmB,KAA1E,CADF,CADF,CADF,EAME;AAAK,IAAA,SAAS,EAAEpB,OAAO,CAACX,IAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IANF,EAOE,MAAC,IAAD;AAAM,IAAA,IAAI,EAAC,QAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,MAAD;AAAQ,IAAA,SAAS,EAAEW,OAAO,CAACF,UAA3B;AAAuC,IAAA,KAAK,EAAC,SAA7C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aADF,CAPF,EAYG,CAACG,WAAD,IAAgB,CAACC,OAAjB,IACC,4BACE,MAAC,IAAD;AAAM,IAAA,IAAI,EAAC,WAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,MAAD;AAAQ,IAAA,KAAK,EAAC,SAAd;AAAwB,IAAA,SAAS,EAAEF,OAAO,CAACF,UAA3C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,CADF,EAME,MAAC,IAAD;AAAM,IAAA,IAAI,EAAC,QAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,MAAD;AAAQ,IAAA,KAAK,EAAC,SAAd;AAAwB,IAAA,SAAS,EAAEE,OAAO,CAACF,UAA3C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aADF,CANF,CAbJ,EA0BG,CAAC,CAACG,WAAF,IACC,4BACE,MAAC,UAAD,CACE;AACA;AACA;AACA;AACA;AALF;AAME,IAAA,OAAO,EAAEM,qBANX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAQE,MAAC,aAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IARF,CADF,EAYE,MAAC,IAAD;AACE,IAAA,QAAQ,EAAEJ,QADZ,CAEE;AAFF;AAGE,IAAA,EAAE,EAAEgB,MAHN;AAIE,IAAA,WAAW,MAJb,CAKE;AALF;AAME,IAAA,IAAI,EAAEd,UANR;AAOE,IAAA,OAAO,EAAEK,eAPX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KASE,MAAC,QAAD;AACE,IAAA,OAAO,EAAE,MAAM,CACb;AACD,KAHH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eATF,EAgBE,MAAC,QAAD;AAAU,IAAA,OAAO,EAAEE,MAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAhBF,CAZF,CA3BJ,CADF,CADF,CADF;AAkED,CA9FM","sourcesContent":["import { useApolloClient } from '@apollo/react-hooks';\nimport { IconButton, Menu, MenuItem } from '@material-ui/core';\nimport AppBar from '@material-ui/core/AppBar';\nimport Button from '@material-ui/core/Button';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport AccountCircle from '@material-ui/icons/AccountCircle';\nimport Cookies from 'js-cookie';\nimport React, { useState } from 'react';\nimport Link from 'next/link';\n\nimport { CurrentUserQuery } from '../../graphql/generated/queries';\nimport { useCurrentUser } from '../../hooks/users.hooks';\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    // flexGrow: 1,\n  },\n  grow: {\n    flexGrow: 1,\n  },\n  menuButton: {\n    marginRight: theme.spacing(2),\n  },\n  title: {\n    flexGrow: 1,\n    textAlign: 'left',\n    color: 'inherit',\n    textDecoration: 'none',\n  },\n  buttonLink: {\n    color: 'inherit',\n    textDecoration: 'none',\n  },\n}));\n\nexport const Header: React.FC<{}> = () => {\n  const classes = useStyles({});\n  const { currentUser, loading } = useCurrentUser();\n  const [anchorEl, setAnchorEl] = useState(null);\n  const isMenuOpen = Boolean(anchorEl);\n\n  const handleProfileMenuOpen = (event: any) => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleMenuClose = () => {\n    setAnchorEl(null);\n  };\n  const client = useApolloClient();\n\n  const logout = () => {\n    Cookies.remove('jwt_token');\n    client.writeData({ data: { isLoggedIn: false } });\n    client.writeQuery({\n      query: CurrentUserQuery,\n      data: { currentUser: null },\n    });\n    handleMenuClose();\n  };\n\n  const menuId = 'primary-search-account-menu';\n  // const history = useHistory();\n\n  return (\n    <div className={classes.root}>\n      <AppBar position=\"static\">\n        <Toolbar>\n          <Typography variant=\"h6\">\n            <Link href=\"/\">\n              <a className={classes.title}>Apollo Project {!!currentUser && currentUser.email}</a>\n            </Link>\n          </Typography>\n          <div className={classes.grow}></div>\n          <Link href=\"/about\">\n            <Button className={classes.buttonLink} color=\"inherit\">\n              About\n            </Button>\n          </Link>\n          {!currentUser && !loading && (\n            <>\n              <Link href=\"/register\">\n                <Button color=\"inherit\" className={classes.buttonLink}>\n                  Register\n                </Button>\n              </Link>\n              <Link href=\"/login\">\n                <Button color=\"inherit\" className={classes.buttonLink}>\n                  Login\n                </Button>\n              </Link>\n            </>\n          )}\n          {!!currentUser && (\n            <>\n              <IconButton\n                // edge=\"end\"\n                // aria-label=\"account of current user\"\n                // aria-controls=\"primary-search-account-menu\"\n                // aria-haspopup=\"true\"\n                // color=\"inherit\"\n                onClick={handleProfileMenuOpen}\n              >\n                <AccountCircle />\n              </IconButton>\n\n              <Menu\n                anchorEl={anchorEl}\n                // anchorOrigin={{ vertical: 'top', horizontal: 'right' }}\n                id={menuId}\n                keepMounted\n                // transformOrigin={{ vertical: 'top', horizontal: 'right' }}\n                open={isMenuOpen}\n                onClose={handleMenuClose}\n              >\n                <MenuItem\n                  onClick={() => {\n                    // history.push(`/profile/${currentUser.key}`);\n                  }}\n                >\n                  Profile\n                </MenuItem>\n                <MenuItem onClick={logout}>Logout</MenuItem>\n              </Menu>\n            </>\n          )}\n        </Toolbar>\n      </AppBar>\n    </div>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}